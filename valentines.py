# -*- coding: utf-8 -*-
"""Valentines.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1wUYaJATdlFzneSsaIqzVHGtsQHz7raV1
"""

import streamlit as st
import time

# -----------------------------
# Page Config
# -----------------------------
st.set_page_config(page_title="Valentine ğŸ’–", layout="centered")


# -----------------------------
# Session State Setup
# -----------------------------
if "show_error" not in st.session_state:
    st.session_state.show_error = False

if "error_start_time" not in st.session_state:
    st.session_state.error_start_time = None


# -----------------------------
# Styling
# -----------------------------
st.markdown("""
<style>

body {
    background-color: #ffb6c1;
}

.main {
    background-color: #ffb6c1;
}

/* Center buttons */
.button-container {
    display: flex;
    justify-content: center;
    gap: 60px;
    margin-top: 40px;
}

/* Error overlay */
.error-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

/* Error box */
.error-box {
    background-color: #ffc0cb;
    padding: 35px 45px;
    border-radius: 20px;
    text-align: center;
    width: 320px;
}

/* Cream text */
.cream-text {
    color: #fff3d6;
}

/* Black error text */
.black-text {
    color: black;
    font-weight: bold;
}

</style>
""", unsafe_allow_html=True)


# -----------------------------
# Main Content
# -----------------------------
st.markdown("<h1 class='cream-text' style='text-align:center;'>ğŸ’– Will You Be My Valentine? ğŸ’–</h1>",
            unsafe_allow_html=True)


# Buttons
col1, col2 = st.columns([1, 1])

with col1:
    yes = st.button("ğŸ’˜ YES ğŸ’˜", use_container_width=True)

with col2:
    no = st.button("ğŸ’” NO ğŸ’”", use_container_width=True)


# -----------------------------
# Button Logic
# -----------------------------
if yes:
    st.balloons()
    st.success("YAY!! ğŸ’• I knew you'd say yes ğŸ˜˜")

if no:
    st.session_state.show_error = True
    st.session_state.error_start_time = time.time()
    st.rerun()


# -----------------------------
# Error Popup + Timer
# -----------------------------
if st.session_state.show_error:

    elapsed = time.time() - st.session_state.error_start_time
    remaining = max(0, 5 - int(elapsed))

    if remaining == 0:
        st.session_state.show_error = False
        st.rerun()

    st.markdown(f"""
    <div class="error-overlay">
        <div class="error-box">

            <h2>âš ï¸ SYSTEM ERROR</h2>

            <p class="black-text">
                âŒ ERROR: You cannot choose that option.
            </p>

            <p class="cream-text">
                Please try again ğŸ’–<br><br>
                (Click anywhere to try again)
            </p>

            <p class="cream-text">
                Closing in {remaining}...
            </p>

        </div>
    </div>
    """, unsafe_allow_html=True)

    # Refresh every second
    time.sleep(1)
    st.rerun()